generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model dataPeminjam {
  id_peminjam     Int       @id @default(autoincrement())
  id_barang       String
  nama_dosen      String    @db.VarChar(50)
  nama_matakuliah String    @db.VarChar(50)
  prasat          String    @db.VarChar(50)
  jam_praktek     String    @db.VarChar(10)
  tanggal_praktek String?   @db.VarChar(20)
  tanggal_pengambilan DateTime @db.Timestamp(6) @default(now()) 
  nama_barang     String    @db.VarChar(50) 
  keterangan      String    @db.VarChar(50)

  barang barang @relation(fields: [id_barang], references: [id_barang])
  barangKeluar barangKeluar[]
  History History[]
}

model Users {
  user_id    Int       @id @default(autoincrement())
  username   String    @unique @db.VarChar(50)
  password   String    @db.VarChar(50)
  email      String    @unique @db.VarChar(255)
  created_on DateTime  @db.Timestamp(6)
  last_login DateTime? @db.Timestamp(6)
}

model barang {
  id_barang     String    @id 
  nama_barang   String    @db.VarChar(50)
  total_stock   Int       
  jenis_barang  String    @db.VarChar(50)

  dataPeminjam dataPeminjam[]
  barangMasuk barangMasuk[]
  barangKeluar barangKeluar[]
}

model barangMasuk {
  id_barang_masuk  Int    @id @default(autoincrement()) 
  id_barang     String
  nama_barang   String    @db.VarChar(50)
  tanggal_masuk DateTime? @default(now()) @db.Timestamp(6)
  total_stock   Int 
  jenis_barang  String    @db.VarChar(50)  

  barang barang @relation(fields: [id_barang], references: [id_barang])
}

model barangKeluar {
  id_barang_keluar  Int @id @default(autoincrement())
  id_barang     String
  nama_barang   String     @db.VarChar(50)
  tanggal_keluar DateTime? @default(now()) @db.Timestamp(6)
  total_stock   Int
  jenis_barang  String    @db.VarChar(50) 

  barang barang  @relation(fields: [id_barang], references: [id_barang])
  dataPeminjam dataPeminjam[]
}

model History {
  id_history    Int       @id @default(autoincrement())
  id_barang     String  
  id_peminjam   Int   
  nama_barang   String    @db.VarChar(50)
  stock_awal    Int
  stock_sisa    Int
  hematologi    Int
  kardio        Int
  respiratory   Int
  integumen     Int
  muskulo       Int
  persepsi      Int
  kritis        Int
  paliatif      Int
  biomedik      Int
  kdp           Int
  jumlah        Int
  
  dataPeminjam dataPeminjam  @relation(fields: [id_peminjam], references: [id_peminjam])
}



